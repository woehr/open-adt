<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><a name="line-2"></a><span class="hs-cpp">#if __GLASGOW_HASKELL__ &gt;= 707
</span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable, StandaloneDeriving, Safe, DefaultSignatures #-}</span><span>
</span><a name="line-4"></a><span class="hs-cpp">#elif __GLASGOW_HASKELL__ &gt;= 702
</span><span class="hs-pragma">{-# LANGUAGE Trustworthy, DefaultSignatures #-}</span><span>
</span><a name="line-6"></a><span class="hs-cpp">#endif
#if __GLASGOW_HASKELL__ &gt;= 706
</span><span class="hs-pragma">{-# LANGUAGE PolyKinds #-}</span><span>
</span><a name="line-9"></a><span class="hs-cpp">#endif
</span><span> </span><span class="hs-comment">-----------------------------------------------------------------------------</span><span>
</span><a name="line-11"></a><span class="hs-comment">-- |</span><span>
</span><a name="line-12"></a><span class="hs-comment">-- Module      :  Control.Comonad</span><span>
</span><a name="line-13"></a><span class="hs-comment">-- Copyright   :  (C) 2008-2015 Edward Kmett,</span><span>
</span><a name="line-14"></a><span class="hs-comment">--                (C) 2004 Dave Menendez</span><span>
</span><a name="line-15"></a><span class="hs-comment">-- License     :  BSD-style (see the file LICENSE)</span><span>
</span><a name="line-16"></a><span class="hs-comment">--</span><span>
</span><a name="line-17"></a><span class="hs-comment">-- Maintainer  :  Edward Kmett &lt;ekmett@gmail.com&gt;</span><span>
</span><a name="line-18"></a><span class="hs-comment">-- Stability   :  provisional</span><span>
</span><a name="line-19"></a><span class="hs-comment">-- Portability :  portable</span><span>
</span><a name="line-20"></a><span class="hs-comment">--</span><span>
</span><a name="line-21"></a><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><a name="line-22"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Control.Comonad</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-23"></a><span>  </span><span class="hs-comment">-- * Comonads</span><span>
</span><a name="line-24"></a><span>    </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-25"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Comonad.html#liftW"><span class="hs-identifier hs-var">liftW</span></a><span>     </span><span class="hs-comment">-- :: Comonad w =&gt; (a -&gt; b) -&gt; w a -&gt; w b</span><span>
</span><a name="line-26"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Comonad.html#wfix"><span class="hs-identifier hs-var">wfix</span></a><span>      </span><span class="hs-comment">-- :: Comonad w =&gt; w (w a -&gt; a) -&gt; a</span><span>
</span><a name="line-27"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Comonad.html#cfix"><span class="hs-identifier hs-var">cfix</span></a><span>      </span><span class="hs-comment">-- :: Comonad w =&gt; (w a -&gt; a) -&gt; w a</span><span>
</span><a name="line-28"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Comonad.html#kfix"><span class="hs-identifier hs-var">kfix</span></a><span>      </span><span class="hs-comment">-- :: ComonadApply w =&gt; w (w a -&gt; a) -&gt; w a</span><span>
</span><a name="line-29"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#%3D%3E%3D"><span class="hs-operator hs-var">=&gt;=</span></a><span class="hs-special">)</span><span>
</span><a name="line-30"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#%3D%3C%3D"><span class="hs-operator hs-var">=&lt;=</span></a><span class="hs-special">)</span><span>
</span><a name="line-31"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#%3C%3C%3D"><span class="hs-operator hs-var">&lt;&lt;=</span></a><span class="hs-special">)</span><span>
</span><a name="line-32"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#%3D%3E%3E"><span class="hs-operator hs-var">=&gt;&gt;</span></a><span class="hs-special">)</span><span>
</span><a name="line-33"></a><span>  </span><span class="hs-comment">-- * Combining Comonads</span><span>
</span><a name="line-34"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Comonad.html#ComonadApply"><span class="hs-identifier hs-type">ComonadApply</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-35"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#%3C%40%40%3E"><span class="hs-operator hs-var">&lt;@@&gt;</span></a><span class="hs-special">)</span><span>    </span><span class="hs-comment">-- :: ComonadApply w =&gt; w a -&gt; w (a -&gt; b) -&gt; w b</span><span>
</span><a name="line-36"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Comonad.html#liftW2"><span class="hs-identifier hs-var">liftW2</span></a><span>    </span><span class="hs-comment">-- :: ComonadApply w =&gt; (a -&gt; b -&gt; c) -&gt; w a -&gt; w b -&gt; w c</span><span>
</span><a name="line-37"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Comonad.html#liftW3"><span class="hs-identifier hs-var">liftW3</span></a><span>    </span><span class="hs-comment">-- :: ComonadApply w =&gt; (a -&gt; b -&gt; c -&gt; d) -&gt; w a -&gt; w b -&gt; w c -&gt; w d</span><span>
</span><a name="line-38"></a><span>  </span><span class="hs-comment">-- * Cokleisli Arrows</span><span>
</span><a name="line-39"></a><span>  </span><span class="hs-special">,</span><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-type">Cokleisli</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-40"></a><span>  </span><span class="hs-comment">-- * Functors</span><span>
</span><a name="line-41"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Functor</span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-42"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;$&gt;</span><span class="hs-special">)</span><span>     </span><span class="hs-comment">-- :: Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b</span><span>
</span><a name="line-43"></a><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">$&gt;</span><span class="hs-special">)</span><span>      </span><span class="hs-comment">-- :: Functor f =&gt; f a -&gt; b -&gt; f b</span><span>
</span><a name="line-44"></a><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-45"></a><span>
</span><a name="line-46"></a><span class="hs-comment">-- import _everything_</span><span>
</span><a name="line-47"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Functor</span><span>
</span><a name="line-48"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Applicative</span><span>
</span><a name="line-49"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Arrow</span><span>
</span><a name="line-50"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Category</span><span>
</span><a name="line-51"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ap</span><span class="hs-special">)</span><span>
</span><a name="line-52"></a><span class="hs-cpp">#if MIN_VERSION_base(4,7,0)
</span><span class="hs-comment">-- Control.Monad.Instances is empty</span><span>
</span><a name="line-54"></a><span class="hs-cpp">#else
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad.Instances</span><span>
</span><a name="line-56"></a><span class="hs-cpp">#endif
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad.Trans.Identity</span><span>
</span><a name="line-58"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Functor.Identity</span><span>
</span><a name="line-59"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.Functor.Sum</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">FSum</span><span>
</span><a name="line-60"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.List.NonEmpty</span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">map</span><span class="hs-special">)</span><span>
</span><a name="line-61"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Semigroup</span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Product</span><span class="hs-special">)</span><span>
</span><a name="line-62"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Tagged</span><span>
</span><a name="line-63"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Prelude</span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">id</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">.</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-64"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad.Fix</span><span>
</span><a name="line-65"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Typeable</span><span>
</span><a name="line-66"></a><span>
</span><a name="line-67"></a><span class="hs-cpp">#ifdef MIN_VERSION_containers
</span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Tree</span><span>
</span><a name="line-69"></a><span class="hs-cpp">#endif
</span><span>
</span><a name="line-71"></a><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span> </span><a name="%3C%40"><a href="Control.Comonad.html#%3C%40"><span class="hs-operator">&lt;@</span></a></a><span class="hs-special">,</span><span> </span><a name="%40%3E"><a href="Control.Comonad.html#%40%3E"><span class="hs-operator">@&gt;</span></a></a><span class="hs-special">,</span><span> </span><a name="%3C%40%40%3E"><a href="Control.Comonad.html#%3C%40%40%3E"><span class="hs-operator">&lt;@@&gt;</span></a></a><span class="hs-special">,</span><span> </span><a name="%3C%40%3E"><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator">&lt;@&gt;</span></a></a><span>
</span><a name="line-72"></a><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">1</span><span> </span><a name="%3D%3E%3E"><a href="Control.Comonad.html#%3D%3E%3E"><span class="hs-operator">=&gt;&gt;</span></a></a><span>
</span><a name="line-73"></a><span class="hs-keyword">infixr</span><span> </span><span class="hs-number">1</span><span> </span><a name="%3C%3C%3D"><a href="Control.Comonad.html#%3C%3C%3D"><span class="hs-operator">&lt;&lt;=</span></a></a><span class="hs-special">,</span><span> </span><a name="%3D%3C%3D"><a href="Control.Comonad.html#%3D%3C%3D"><span class="hs-operator">=&lt;=</span></a></a><span class="hs-special">,</span><span> </span><a name="%3D%3E%3D"><a href="Control.Comonad.html#%3D%3E%3D"><span class="hs-operator">=&gt;=</span></a></a><span>
</span><a name="line-74"></a><span>
</span><a name="line-75"></a><span class="hs-comment">{- |

There are two ways to define a comonad:

I. Provide definitions for 'extract' and 'extend'
satisfying these laws:

@
'extend' 'extract'      = 'id'
'extract' . 'extend' f  = f
'extend' f . 'extend' g = 'extend' (f . 'extend' g)
@

In this case, you may simply set 'fmap' = 'liftW'.

These laws are directly analogous to the laws for monads
and perhaps can be made clearer by viewing them as laws stating
that Cokleisli composition must be associative, and has extract for
a unit:

@
f '=&gt;=' 'extract'   = f
'extract' '=&gt;=' f   = f
(f '=&gt;=' g) '=&gt;=' h = f '=&gt;=' (g '=&gt;=' h)
@

II. Alternately, you may choose to provide definitions for 'fmap',
'extract', and 'duplicate' satisfying these laws:

@
'extract' . 'duplicate'      = 'id'
'fmap' 'extract' . 'duplicate' = 'id'
'duplicate' . 'duplicate'    = 'fmap' 'duplicate' . 'duplicate'
@

In this case you may not rely on the ability to define 'fmap' in
terms of 'liftW'.

You may of course, choose to define both 'duplicate' /and/ 'extend'.
In that case you must also satisfy these laws:

@
'extend' f  = 'fmap' f . 'duplicate'
'duplicate' = 'extend' id
'fmap' f    = 'extend' (f . 'extract')
@

These are the default definitions of 'extend' and 'duplicate' and
the definition of 'liftW' respectively.

-}</span><span>
</span><a name="line-126"></a><span>
</span><a name="line-127"></a><span class="hs-keyword">class</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><a href="#local-6989586621679031731"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a name="Comonad"><a href="Control.Comonad.html#Comonad"><span class="hs-identifier">Comonad</span></a></a><span> </span><a name="local-6989586621679031731"><a href="#local-6989586621679031731"><span class="hs-identifier">w</span></a></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-128"></a><span>  </span><span class="hs-comment">-- |</span><span>
</span><a name="line-129"></a><span>  </span><span class="hs-comment">-- @</span><span>
</span><a name="line-130"></a><span>  </span><span class="hs-comment">-- 'extract' . 'fmap' f = f . 'extract'</span><span>
</span><a name="line-131"></a><span>  </span><span class="hs-comment">-- @</span><span>
</span><a name="line-132"></a><span>  </span><a name="extract"><a href="Control.Comonad.html#extract"><span class="hs-identifier">extract</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679031731"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031732"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031732"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-133"></a><span>
</span><a name="line-134"></a><span>  </span><span class="hs-comment">-- |</span><span>
</span><a name="line-135"></a><span>  </span><span class="hs-comment">-- @</span><span>
</span><a name="line-136"></a><span>  </span><span class="hs-comment">-- 'duplicate' = 'extend' 'id'</span><span>
</span><a name="line-137"></a><span>  </span><span class="hs-comment">-- 'fmap' ('fmap' f) . 'duplicate' = 'duplicate' . 'fmap' f</span><span>
</span><a name="line-138"></a><span>  </span><span class="hs-comment">-- @</span><span>
</span><a name="line-139"></a><span>  </span><a name="duplicate"><a href="Control.Comonad.html#duplicate"><span class="hs-identifier">duplicate</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679031731"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031733"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031731"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031731"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031733"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-140"></a><span>  </span><a name="local-8214565720323806205"><a href="Control.Comonad.html#duplicate"><span class="hs-identifier">duplicate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#extend"><span class="hs-identifier hs-var">extend</span></a><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-141"></a><span>
</span><a name="line-142"></a><span>  </span><span class="hs-comment">-- |</span><span>
</span><a name="line-143"></a><span>  </span><span class="hs-comment">-- @</span><span>
</span><a name="line-144"></a><span>  </span><span class="hs-comment">-- 'extend' f = 'fmap' f . 'duplicate'</span><span>
</span><a name="line-145"></a><span>  </span><span class="hs-comment">-- @</span><span>
</span><a name="line-146"></a><span>  </span><a name="extend"><a href="Control.Comonad.html#extend"><span class="hs-identifier">extend</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031731"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031734"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031735"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031731"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031734"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031731"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031735"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-147"></a><span>  </span><a name="local-8214565720323806206"><a href="Control.Comonad.html#extend"><span class="hs-identifier">extend</span></a></a><span> </span><a name="local-6989586621679031736"><a href="#local-6989586621679031736"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fmap</span><span> </span><a href="#local-6989586621679031736"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Comonad.html#duplicate"><span class="hs-identifier hs-var">duplicate</span></a><span>
</span><a name="line-148"></a><span>
</span><a name="line-149"></a><span class="hs-cpp">#if __GLASGOW_HASKELL__ &gt;= 708
</span><span>  </span><span class="hs-pragma">{-# MINIMAL</span><span> </span><span class="hs-pragma">extract</span><span class="hs-pragma">,</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">duplicate</span><span> </span><span class="hs-pragma">|</span><span> </span><span class="hs-pragma">extend</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-151"></a><span class="hs-cpp">#endif
</span><span>
</span><a name="line-153"></a><span>
</span><a name="line-154"></a><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><a href="#local-6989586621679031827"><span class="hs-identifier hs-type">e</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-155"></a><span>  </span><a name="local-8214565720323806205"><a href="Control.Comonad.html#duplicate"><span class="hs-identifier">duplicate</span></a></a><span> </span><a name="local-6989586621679031828"><a href="#local-6989586621679031828"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fst</span><span> </span><a href="#local-6989586621679031828"><span class="hs-identifier hs-var">p</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679031828"><span class="hs-identifier hs-var">p</span></a><span class="hs-special">)</span><span>
</span><a name="line-156"></a><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">duplicate</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-157"></a><span>  </span><a name="local-8214565720323806204"><a href="Control.Comonad.html#extract"><span class="hs-identifier">extract</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">snd</span><span>
</span><a name="line-158"></a><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">extract</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-159"></a><span>
</span><a name="line-160"></a><span class="hs-cpp">#if MIN_VERSION_semigroups(0,16,2)
</span><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Arg</span><span> </span><a href="#local-6989586621679031820"><span class="hs-identifier hs-type">e</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-162"></a><span>  </span><a name="local-8214565720323806205"><a href="Control.Comonad.html#duplicate"><span class="hs-identifier">duplicate</span></a></a><span> </span><a name="local-6989586621679031821"><a href="#local-6989586621679031821"><span class="hs-identifier">w</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-identifier hs-var">Arg</span><span> </span><a name="local-6989586621679031822"><a href="#local-6989586621679031822"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Arg</span><span> </span><a href="#local-6989586621679031822"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679031821"><span class="hs-identifier hs-var">w</span></a><span>
</span><a name="line-163"></a><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">duplicate</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-164"></a><span>  </span><a name="local-8214565720323806206"><a href="Control.Comonad.html#extend"><span class="hs-identifier">extend</span></a></a><span> </span><a name="local-6989586621679031823"><a href="#local-6989586621679031823"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679031824"><a href="#local-6989586621679031824"><span class="hs-identifier">w</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-identifier hs-var">Arg</span><span> </span><a name="local-6989586621679031825"><a href="#local-6989586621679031825"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Arg</span><span> </span><a href="#local-6989586621679031825"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031823"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679031824"><span class="hs-identifier hs-var">w</span></a><span class="hs-special">)</span><span>
</span><a name="line-165"></a><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">extend</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-166"></a><span>  </span><a name="local-8214565720323806204"><a href="Control.Comonad.html#extract"><span class="hs-identifier">extract</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Arg</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679031826"><a href="#local-6989586621679031826"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679031826"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-167"></a><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">extract</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-168"></a><span class="hs-cpp">#endif
</span><span>
</span><a name="line-170"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679031816"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-glyph">-&gt;</span><span class="hs-special">)</span><a href="#local-6989586621679031816"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-171"></a><span>  </span><a name="local-8214565720323806205"><a href="Control.Comonad.html#duplicate"><span class="hs-identifier">duplicate</span></a></a><span> </span><a name="local-6989586621679031817"><a href="#local-6989586621679031817"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679031818"><a href="#local-6989586621679031818"><span class="hs-identifier">m</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679031817"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">mappend</span><span> </span><a href="#local-6989586621679031818"><span class="hs-identifier hs-var">m</span></a><span>
</span><a name="line-172"></a><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">duplicate</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-173"></a><span>  </span><a name="local-8214565720323806204"><a href="Control.Comonad.html#extract"><span class="hs-identifier">extract</span></a></a><span> </span><a name="local-6989586621679031819"><a href="#local-6989586621679031819"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679031819"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-identifier hs-var">mempty</span><span>
</span><a name="line-174"></a><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">extract</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-175"></a><span>
</span><a name="line-176"></a><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><span class="hs-identifier hs-type">Identity</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-177"></a><span>  </span><a name="local-8214565720323806205"><a href="Control.Comonad.html#duplicate"><span class="hs-identifier">duplicate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Identity</span><span>
</span><a name="line-178"></a><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">duplicate</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-179"></a><span>  </span><a name="local-8214565720323806204"><a href="Control.Comonad.html#extract"><span class="hs-identifier">extract</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">runIdentity</span><span>
</span><a name="line-180"></a><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">extract</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-181"></a><span>
</span><a name="line-182"></a><span class="hs-cpp">#if __GLASGOW_HASKELL__ &gt;= 706
</span><span class="hs-comment">-- $</span><span>
</span><a name="line-184"></a><span class="hs-comment">-- The variable `s` can have any kind.</span><span>
</span><a name="line-185"></a><span class="hs-comment">-- For example, here it has kind `Bool`:</span><span>
</span><a name="line-186"></a><span class="hs-comment">-- &gt;&gt;&gt; :set -XDataKinds</span><span>
</span><a name="line-187"></a><span class="hs-comment">-- &gt;&gt;&gt; extract (Tagged 42 :: Tagged 'True Integer)</span><span>
</span><a name="line-188"></a><span class="hs-comment">-- 42</span><span>
</span><a name="line-189"></a><span class="hs-cpp">#endif
</span><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Tagged</span><span> </span><a href="#local-6989586621679031815"><span class="hs-identifier hs-type">s</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-191"></a><span>  </span><a name="local-8214565720323806205"><a href="Control.Comonad.html#duplicate"><span class="hs-identifier">duplicate</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Tagged</span><span>
</span><a name="line-192"></a><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">duplicate</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-193"></a><span>  </span><a name="local-8214565720323806204"><a href="Control.Comonad.html#extract"><span class="hs-identifier">extract</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">unTagged</span><span>
</span><a name="line-194"></a><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">extract</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-195"></a><span>
</span><a name="line-196"></a><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><a href="#local-6989586621679031812"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IdentityT</span><span> </span><a href="#local-6989586621679031812"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-197"></a><span>  </span><a name="local-8214565720323806206"><a href="Control.Comonad.html#extend"><span class="hs-identifier">extend</span></a></a><span> </span><a name="local-6989586621679031813"><a href="#local-6989586621679031813"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">IdentityT</span><span> </span><a name="local-6989586621679031814"><a href="#local-6989586621679031814"><span class="hs-identifier">m</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">IdentityT</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#extend"><span class="hs-identifier hs-var">extend</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031813"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">IdentityT</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679031814"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span>
</span><a name="line-198"></a><span>  </span><a name="local-8214565720323806204"><a href="Control.Comonad.html#extract"><span class="hs-identifier">extract</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#extract"><span class="hs-identifier hs-var">extract</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier">runIdentityT</span><span>
</span><a name="line-199"></a><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">extract</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-200"></a><span>
</span><a name="line-201"></a><span class="hs-cpp">#ifdef MIN_VERSION_containers
</span><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><span class="hs-identifier hs-type">Tree</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-203"></a><span>  </span><a name="local-8214565720323806205"><a href="Control.Comonad.html#duplicate"><span class="hs-identifier">duplicate</span></a></a><span> </span><a name="local-6989586621679031809"><a href="#local-6989586621679031809"><span class="hs-identifier">w</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-identifier hs-var">Node</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-keyword">as</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Node</span><span> </span><a href="#local-6989586621679031809"><span class="hs-identifier hs-var">w</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">map</span><span> </span><a href="Control.Comonad.html#duplicate"><span class="hs-identifier hs-var">duplicate</span></a><span> </span><span class="hs-keyword">as</span><span class="hs-special">)</span><span>
</span><a name="line-204"></a><span>  </span><a name="local-8214565720323806204"><a href="Control.Comonad.html#extract"><span class="hs-identifier">extract</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Node</span><span> </span><a name="local-6989586621679031811"><a href="#local-6989586621679031811"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679031811"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-205"></a><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">extract</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-206"></a><span class="hs-cpp">#endif
</span><span>
</span><a name="line-208"></a><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><span class="hs-identifier hs-type">NonEmpty</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-209"></a><span>  </span><a name="local-8214565720323806206"><a href="Control.Comonad.html#extend"><span class="hs-identifier">extend</span></a></a><span> </span><a name="local-6989586621679031803"><a href="#local-6989586621679031803"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679031804"><a href="#local-6989586621679031804"><span class="hs-identifier">w</span></a></a><span class="hs-glyph">@</span><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="hs-identifier">_</span><span> </span><span class="hs-operator hs-var">:|</span><span> </span><a name="local-6989586621679031805"><a href="#local-6989586621679031805"><span class="hs-identifier">aas</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679031803"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679031804"><span class="hs-identifier hs-var">w</span></a><span> </span><span class="hs-operator hs-var">:|</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679031805"><span class="hs-identifier hs-var">aas</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-210"></a><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-211"></a><span>      </span><span class="hs-special">(</span><a name="local-6989586621679031806"><a href="#local-6989586621679031806"><span class="hs-identifier">a</span></a></a><span class="hs-glyph">:</span><span class="hs-keyword">as</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">toList</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#extend"><span class="hs-identifier hs-var">extend</span></a><span> </span><a href="#local-6989586621679031803"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031806"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">:|</span><span> </span><span class="hs-keyword">as</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-212"></a><span>  </span><a name="local-8214565720323806204"><a href="Control.Comonad.html#extract"><span class="hs-identifier">extract</span></a></a><span> </span><span class="hs-glyph">~</span><span class="hs-special">(</span><a name="local-6989586621679031808"><a href="#local-6989586621679031808"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-operator hs-var">:|</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679031808"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-213"></a><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">extract</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-214"></a><span>
</span><a name="line-215"></a><span class="hs-identifier">coproduct</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031864"><span class="hs-identifier hs-type">f</span></a><span> </span><a href="#local-6989586621679031865"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031866"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031867"><span class="hs-identifier hs-type">g</span></a><span> </span><a href="#local-6989586621679031865"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031866"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FSum.Sum</span><span> </span><a href="#local-6989586621679031864"><span class="hs-identifier hs-type">f</span></a><span> </span><a href="#local-6989586621679031867"><span class="hs-identifier hs-type">g</span></a><span> </span><a href="#local-6989586621679031865"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031866"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-216"></a><a name="coproduct"><a href="Control.Comonad.html#coproduct"><span class="hs-identifier">coproduct</span></a></a><span> </span><a name="local-6989586621679031868"><a href="#local-6989586621679031868"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">FSum.InL</span><span> </span><a name="local-6989586621679031869"><a href="#local-6989586621679031869"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679031868"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679031869"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-217"></a><span class="hs-identifier">coproduct</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679031870"><a href="#local-6989586621679031870"><span class="hs-identifier">g</span></a></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">FSum.InR</span><span> </span><a name="local-6989586621679031871"><a href="#local-6989586621679031871"><span class="hs-identifier">y</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679031870"><span class="hs-identifier hs-var">g</span></a><span> </span><a href="#local-6989586621679031871"><span class="hs-identifier hs-var">y</span></a><span>
</span><a name="line-218"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">coproduct</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-219"></a><span>
</span><a name="line-220"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><a href="#local-6989586621679031800"><span class="hs-identifier hs-type">f</span></a><span class="hs-special">,</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><a href="#local-6989586621679031801"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">FSum.Sum</span><span> </span><a href="#local-6989586621679031800"><span class="hs-identifier hs-type">f</span></a><span> </span><a href="#local-6989586621679031801"><span class="hs-identifier hs-type">g</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-221"></a><span>  </span><a name="local-8214565720323806206"><a href="Control.Comonad.html#extend"><span class="hs-identifier">extend</span></a></a><span> </span><a name="local-6989586621679031802"><a href="#local-6989586621679031802"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#coproduct"><span class="hs-identifier hs-var">coproduct</span></a><span>
</span><a name="line-222"></a><span>               </span><span class="hs-special">(</span><span class="hs-identifier hs-var">FSum.InL</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Comonad.html#extend"><span class="hs-identifier hs-var">extend</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031802"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">FSum.InL</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-223"></a><span>               </span><span class="hs-special">(</span><span class="hs-identifier hs-var">FSum.InR</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Comonad.html#extend"><span class="hs-identifier hs-var">extend</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031802"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">FSum.InR</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-224"></a><span>  </span><a name="local-8214565720323806204"><a href="Control.Comonad.html#extract"><span class="hs-identifier">extract</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#coproduct"><span class="hs-identifier hs-var">coproduct</span></a><span> </span><a href="Control.Comonad.html#extract"><span class="hs-identifier hs-var">extract</span></a><span> </span><a href="Control.Comonad.html#extract"><span class="hs-identifier hs-var">extract</span></a><span>
</span><a name="line-225"></a><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">extract</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-226"></a><span>
</span><a name="line-227"></a><span>
</span><a name="line-228"></a><span class="hs-comment">-- | @ComonadApply@ is to @Comonad@ like @Applicative@ is to @Monad@.</span><span>
</span><a name="line-229"></a><span class="hs-comment">--</span><span>
</span><a name="line-230"></a><span class="hs-comment">-- Mathematically, it is a strong lax symmetric semi-monoidal comonad on the</span><span>
</span><a name="line-231"></a><span class="hs-comment">-- category @Hask@ of Haskell types. That it to say that @w@ is a strong lax</span><span>
</span><a name="line-232"></a><span class="hs-comment">-- symmetric semi-monoidal functor on Hask, where both 'extract' and 'duplicate' are</span><span>
</span><a name="line-233"></a><span class="hs-comment">-- symmetric monoidal natural transformations.</span><span>
</span><a name="line-234"></a><span class="hs-comment">--</span><span>
</span><a name="line-235"></a><span class="hs-comment">-- Laws:</span><span>
</span><a name="line-236"></a><span class="hs-comment">--</span><span>
</span><a name="line-237"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-238"></a><span class="hs-comment">-- ('.') '&lt;$&gt;' u '&lt;@&gt;' v '&lt;@&gt;' w = u '&lt;@&gt;' (v '&lt;@&gt;' w)</span><span>
</span><a name="line-239"></a><span class="hs-comment">-- 'extract' (p '&lt;@&gt;' q) = 'extract' p ('extract' q)</span><span>
</span><a name="line-240"></a><span class="hs-comment">-- 'duplicate' (p '&lt;@&gt;' q) = ('&lt;@&gt;') '&lt;$&gt;' 'duplicate' p '&lt;@&gt;' 'duplicate' q</span><span>
</span><a name="line-241"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-242"></a><span class="hs-comment">--</span><span>
</span><a name="line-243"></a><span class="hs-comment">-- If our type is both a 'ComonadApply' and 'Applicative' we further require</span><span>
</span><a name="line-244"></a><span class="hs-comment">--</span><span>
</span><a name="line-245"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-246"></a><span class="hs-comment">-- ('&lt;*&gt;') = ('&lt;@&gt;')</span><span>
</span><a name="line-247"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-248"></a><span class="hs-comment">--</span><span>
</span><a name="line-249"></a><span class="hs-comment">-- Finally, if you choose to define ('&lt;@') and ('@&gt;'), the results of your</span><span>
</span><a name="line-250"></a><span class="hs-comment">-- definitions should match the following laws:</span><span>
</span><a name="line-251"></a><span class="hs-comment">--</span><span>
</span><a name="line-252"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-253"></a><span class="hs-comment">-- a '@&gt;' b = 'const' 'id' '&lt;$&gt;' a '&lt;@&gt;' b</span><span>
</span><a name="line-254"></a><span class="hs-comment">-- a '&lt;@' b = 'const' '&lt;$&gt;' a '&lt;@&gt;' b</span><span>
</span><a name="line-255"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-256"></a><span>
</span><a name="line-257"></a><span class="hs-keyword">class</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><a href="#local-6989586621679031718"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a name="ComonadApply"><a href="Control.Comonad.html#ComonadApply"><span class="hs-identifier">ComonadApply</span></a></a><span> </span><a name="local-6989586621679031718"><a href="#local-6989586621679031718"><span class="hs-identifier">w</span></a></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-258"></a><span>  </span><span class="hs-special">(</span><a name="%3C%40%3E"><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator">&lt;@&gt;</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679031718"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031719"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031720"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031718"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031719"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031718"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031720"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-259"></a><span class="hs-cpp">#if __GLASGOW_HASKELL__ &gt;= 702
</span><span>  </span><span class="hs-keyword">default</span><span> </span><span class="hs-special">(</span><a name="%3C%40%3E"><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator">&lt;@&gt;</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><a href="#local-6989586621679031718"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679031718"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031721"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031722"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031718"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031721"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031718"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031722"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-261"></a><span>  </span><span class="hs-special">(</span><a name="local-8214565720323806200"><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator">&lt;@&gt;</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;*&gt;</span><span class="hs-special">)</span><span>
</span><a name="line-262"></a><span class="hs-cpp">#endif
</span><span>
</span><a name="line-264"></a><span>  </span><span class="hs-special">(</span><a name="%40%3E"><a href="Control.Comonad.html#%40%3E"><span class="hs-operator">@&gt;</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679031718"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031723"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031718"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031724"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031718"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031724"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-265"></a><span>  </span><a name="local-6989586621679031727"><a href="#local-6989586621679031727"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-8214565720323806201"><a href="Control.Comonad.html#%40%3E"><span class="hs-operator">@&gt;</span></a></a><span> </span><a name="local-6989586621679031728"><a href="#local-6989586621679031728"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">const</span><span> </span><span class="hs-identifier hs-var">id</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="#local-6989586621679031727"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a><span> </span><a href="#local-6989586621679031728"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-266"></a><span>
</span><a name="line-267"></a><span>  </span><span class="hs-special">(</span><a name="%3C%40"><a href="Control.Comonad.html#%3C%40"><span class="hs-operator">&lt;@</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679031718"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031725"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031718"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031726"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031718"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031725"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-268"></a><span>  </span><a name="local-6989586621679031729"><a href="#local-6989586621679031729"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-8214565720323806202"><a href="Control.Comonad.html#%3C%40"><span class="hs-operator">&lt;@</span></a></a><span> </span><a name="local-6989586621679031730"><a href="#local-6989586621679031730"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">const</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="#local-6989586621679031729"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a><span> </span><a href="#local-6989586621679031730"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-269"></a><span>
</span><a name="line-270"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Semigroup</span><span> </span><a href="#local-6989586621679031789"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Control.Comonad.html#ComonadApply"><span class="hs-identifier hs-type">ComonadApply</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><a href="#local-6989586621679031789"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-271"></a><span>  </span><span class="hs-special">(</span><a name="local-6989586621679031790"><a href="#local-6989586621679031790"><span class="hs-identifier">m</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679031791"><a href="#local-6989586621679031791"><span class="hs-identifier">f</span></a></a><span class="hs-special">)</span><span> </span><a name="local-8214565720323806200"><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator">&lt;@&gt;</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679031792"><a href="#local-6989586621679031792"><span class="hs-identifier">n</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679031793"><a href="#local-6989586621679031793"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031790"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679031792"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679031791"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679031793"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-272"></a><span>  </span><span class="hs-special">(</span><a name="local-6989586621679031794"><a href="#local-6989586621679031794"><span class="hs-identifier">m</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679031795"><a href="#local-6989586621679031795"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span> </span><a name="local-8214565720323806202"><a href="Control.Comonad.html#%3C%40"><span class="hs-operator">&lt;@</span></a></a><span>  </span><span class="hs-special">(</span><a name="local-6989586621679031796"><a href="#local-6989586621679031796"><span class="hs-identifier">n</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031794"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679031796"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679031795"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span>
</span><a name="line-273"></a><span>  </span><span class="hs-special">(</span><a name="local-6989586621679031797"><a href="#local-6989586621679031797"><span class="hs-identifier">m</span></a></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">)</span><span>  </span><a name="local-8214565720323806201"><a href="Control.Comonad.html#%40%3E"><span class="hs-operator">@&gt;</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679031798"><a href="#local-6989586621679031798"><span class="hs-identifier">n</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679031799"><a href="#local-6989586621679031799"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031797"><span class="hs-identifier hs-var">m</span></a><span> </span><span class="hs-operator hs-var">&lt;&gt;</span><span> </span><a href="#local-6989586621679031798"><span class="hs-identifier hs-var">n</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679031799"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-274"></a><span>
</span><a name="line-275"></a><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#ComonadApply"><span class="hs-identifier hs-type">ComonadApply</span></a><span> </span><span class="hs-identifier hs-type">NonEmpty</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-276"></a><span>  </span><span class="hs-special">(</span><a name="local-8214565720323806200"><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator">&lt;@&gt;</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">ap</span><span>
</span><a name="line-277"></a><span>
</span><a name="line-278"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Monoid</span><span> </span><a href="#local-6989586621679031788"><span class="hs-identifier hs-type">m</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Control.Comonad.html#ComonadApply"><span class="hs-identifier hs-type">ComonadApply</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-glyph">-&gt;</span><span class="hs-special">)</span><a href="#local-6989586621679031788"><span class="hs-identifier hs-type">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-279"></a><span>  </span><span class="hs-special">(</span><a name="local-8214565720323806200"><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator">&lt;@&gt;</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;*&gt;</span><span class="hs-special">)</span><span>
</span><a name="line-280"></a><span>  </span><span class="hs-special">(</span><a name="local-8214565720323806202"><a href="Control.Comonad.html#%3C%40"><span class="hs-operator">&lt;@</span></a></a><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;*</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-281"></a><span>  </span><span class="hs-special">(</span><span> </span><a name="local-8214565720323806201"><a href="Control.Comonad.html#%40%3E"><span class="hs-operator">@&gt;</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-operator hs-var">*&gt;</span><span class="hs-special">)</span><span>
</span><a name="line-282"></a><span>
</span><a name="line-283"></a><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#ComonadApply"><span class="hs-identifier hs-type">ComonadApply</span></a><span> </span><span class="hs-identifier hs-type">Identity</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-284"></a><span>  </span><span class="hs-special">(</span><a name="local-8214565720323806200"><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator">&lt;@&gt;</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;*&gt;</span><span class="hs-special">)</span><span>
</span><a name="line-285"></a><span>  </span><span class="hs-special">(</span><a name="local-8214565720323806202"><a href="Control.Comonad.html#%3C%40"><span class="hs-operator">&lt;@</span></a></a><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;*</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-286"></a><span>  </span><span class="hs-special">(</span><span> </span><a name="local-8214565720323806201"><a href="Control.Comonad.html#%40%3E"><span class="hs-operator">@&gt;</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-operator hs-var">*&gt;</span><span class="hs-special">)</span><span>
</span><a name="line-287"></a><span>
</span><a name="line-288"></a><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#ComonadApply"><span class="hs-identifier hs-type">ComonadApply</span></a><span> </span><a href="#local-6989586621679031785"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="Control.Comonad.html#ComonadApply"><span class="hs-identifier hs-type">ComonadApply</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IdentityT</span><span> </span><a href="#local-6989586621679031785"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-289"></a><span>  </span><span class="hs-identifier hs-var">IdentityT</span><span> </span><a name="local-6989586621679031786"><a href="#local-6989586621679031786"><span class="hs-identifier">wa</span></a></a><span> </span><a name="local-8214565720323806200"><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator">&lt;@&gt;</span></a></a><span> </span><span class="hs-identifier hs-var">IdentityT</span><span> </span><a name="local-6989586621679031787"><a href="#local-6989586621679031787"><span class="hs-identifier">wb</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">IdentityT</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031786"><span class="hs-identifier hs-var">wa</span></a><span> </span><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a><span> </span><a href="#local-6989586621679031787"><span class="hs-identifier hs-var">wb</span></a><span class="hs-special">)</span><span>
</span><a name="line-290"></a><span>
</span><a name="line-291"></a><span class="hs-cpp">#ifdef MIN_VERSION_containers
</span><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#ComonadApply"><span class="hs-identifier hs-type">ComonadApply</span></a><span> </span><span class="hs-identifier hs-type">Tree</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-293"></a><span>  </span><span class="hs-special">(</span><a name="local-8214565720323806200"><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator">&lt;@&gt;</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;*&gt;</span><span class="hs-special">)</span><span>
</span><a name="line-294"></a><span>  </span><span class="hs-special">(</span><a name="local-8214565720323806202"><a href="Control.Comonad.html#%3C%40"><span class="hs-operator">&lt;@</span></a></a><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;*</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-295"></a><span>  </span><span class="hs-special">(</span><span> </span><a name="local-8214565720323806201"><a href="Control.Comonad.html#%40%3E"><span class="hs-operator">@&gt;</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-operator hs-var">*&gt;</span><span class="hs-special">)</span><span>
</span><a name="line-296"></a><span class="hs-cpp">#endif
</span><span>
</span><a name="line-298"></a><span class="hs-comment">-- | A suitable default definition for 'fmap' for a 'Comonad'.</span><span>
</span><a name="line-299"></a><span class="hs-comment">-- Promotes a function to a comonad.</span><span>
</span><a name="line-300"></a><span class="hs-comment">--</span><span>
</span><a name="line-301"></a><span class="hs-comment">-- You can only safely use to define 'fmap' if your 'Comonad'</span><span>
</span><a name="line-302"></a><span class="hs-comment">-- defined 'extend', not just 'duplicate', since defining</span><span>
</span><a name="line-303"></a><span class="hs-comment">-- 'extend' in terms of duplicate uses 'fmap'!</span><span>
</span><a name="line-304"></a><span class="hs-comment">--</span><span>
</span><a name="line-305"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-306"></a><span class="hs-comment">-- 'fmap' f = 'liftW' f = 'extend' (f . 'extract')</span><span>
</span><a name="line-307"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-308"></a><span class="hs-identifier">liftW</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><a href="#local-6989586621679031861"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031862"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031863"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031861"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031862"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031861"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031863"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-309"></a><a name="liftW"><a href="Control.Comonad.html#liftW"><span class="hs-identifier">liftW</span></a></a><span> </span><a name="local-6989586621679031872"><a href="#local-6989586621679031872"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#extend"><span class="hs-identifier hs-var">extend</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031872"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Comonad.html#extract"><span class="hs-identifier hs-var">extract</span></a><span class="hs-special">)</span><span>
</span><a name="line-310"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">liftW</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-311"></a><span>
</span><a name="line-312"></a><span class="hs-comment">-- | Comonadic fixed point &#224; la David Menendez</span><span>
</span><a name="line-313"></a><span class="hs-identifier">wfix</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><a href="#local-6989586621679031859"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679031859"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031859"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031860"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031860"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031860"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-314"></a><a name="wfix"><a href="Control.Comonad.html#wfix"><span class="hs-identifier">wfix</span></a></a><span> </span><a name="local-6989586621679031873"><a href="#local-6989586621679031873"><span class="hs-identifier">w</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#extract"><span class="hs-identifier hs-var">extract</span></a><span> </span><a href="#local-6989586621679031873"><span class="hs-identifier hs-var">w</span></a><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#extend"><span class="hs-identifier hs-var">extend</span></a><span> </span><a href="Control.Comonad.html#wfix"><span class="hs-identifier hs-var">wfix</span></a><span> </span><a href="#local-6989586621679031873"><span class="hs-identifier hs-var">w</span></a><span class="hs-special">)</span><span>
</span><a name="line-315"></a><span>
</span><a name="line-316"></a><span class="hs-comment">-- | Comonadic fixed point &#224; la Dominic Orchard</span><span>
</span><a name="line-317"></a><span class="hs-identifier">cfix</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><a href="#local-6989586621679031857"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031857"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031858"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031858"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031857"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031858"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-318"></a><a name="cfix"><a href="Control.Comonad.html#cfix"><span class="hs-identifier">cfix</span></a></a><span> </span><a name="local-6989586621679031874"><a href="#local-6989586621679031874"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fix</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#extend"><span class="hs-identifier hs-var">extend</span></a><span> </span><a href="#local-6989586621679031874"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span>
</span><a name="line-319"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">cfix</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-320"></a><span>
</span><a name="line-321"></a><span class="hs-comment">-- | Comonadic fixed point &#224; la Kenneth Foner:</span><span>
</span><a name="line-322"></a><span class="hs-comment">--</span><span>
</span><a name="line-323"></a><span class="hs-comment">-- This is the @evaluate@ function from his &lt;https://www.youtube.com/watch?v=F7F-BzOB670 &quot;Getting a Quick Fix on Comonads&quot;&gt; talk.</span><span>
</span><a name="line-324"></a><span class="hs-identifier">kfix</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Control.Comonad.html#ComonadApply"><span class="hs-identifier hs-type">ComonadApply</span></a><span> </span><a href="#local-6989586621679031855"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679031855"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031855"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031856"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031856"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031855"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031856"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-325"></a><a name="kfix"><a href="Control.Comonad.html#kfix"><span class="hs-identifier">kfix</span></a></a><span> </span><a name="local-6989586621679031888"><a href="#local-6989586621679031888"><span class="hs-identifier">w</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fix</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679031889"><a href="#local-6989586621679031889"><span class="hs-identifier">u</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031888"><span class="hs-identifier hs-var">w</span></a><span> </span><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a><span> </span><a href="Control.Comonad.html#duplicate"><span class="hs-identifier hs-var">duplicate</span></a><span> </span><a href="#local-6989586621679031889"><span class="hs-identifier hs-var">u</span></a><span>
</span><a name="line-326"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">kfix</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-327"></a><span>
</span><a name="line-328"></a><span class="hs-comment">-- | 'extend' with the arguments swapped. Dual to '&gt;&gt;=' for a 'Monad'.</span><span>
</span><a name="line-329"></a><span class="hs-special">(</span><span class="hs-operator">=&gt;&gt;</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><a href="#local-6989586621679031852"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679031852"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031853"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031852"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031853"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031854"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031852"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031854"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-330"></a><span class="hs-special">(</span><a name="%3D%3E%3E"><a href="Control.Comonad.html#%3D%3E%3E"><span class="hs-operator">=&gt;&gt;</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">flip</span><span> </span><a href="Control.Comonad.html#extend"><span class="hs-identifier hs-var">extend</span></a><span>
</span><a name="line-331"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">=&gt;&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-332"></a><span>
</span><a name="line-333"></a><span class="hs-comment">-- | 'extend' in operator form</span><span>
</span><a name="line-334"></a><span class="hs-special">(</span><span class="hs-operator">&lt;&lt;=</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><a href="#local-6989586621679031849"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031849"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031850"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031851"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031849"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031850"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031849"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031851"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-335"></a><span class="hs-special">(</span><a name="%3C%3C%3D"><a href="Control.Comonad.html#%3C%3C%3D"><span class="hs-operator">&lt;&lt;=</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#extend"><span class="hs-identifier hs-var">extend</span></a><span>
</span><a name="line-336"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;&lt;=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-337"></a><span>
</span><a name="line-338"></a><span class="hs-comment">-- | Right-to-left 'Cokleisli' composition</span><span>
</span><a name="line-339"></a><span class="hs-special">(</span><span class="hs-operator">=&lt;=</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><a href="#local-6989586621679031845"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031845"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031846"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031847"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031845"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031848"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031846"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031845"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031848"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031847"><span class="hs-identifier hs-type">c</span></a><span>
</span><a name="line-340"></a><a name="local-6989586621679031890"><a href="#local-6989586621679031890"><span class="hs-identifier">f</span></a></a><span> </span><a name="%3D%3C%3D"><a href="Control.Comonad.html#%3D%3C%3D"><span class="hs-operator">=&lt;=</span></a></a><span> </span><a name="local-6989586621679031891"><a href="#local-6989586621679031891"><span class="hs-identifier">g</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679031890"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Comonad.html#extend"><span class="hs-identifier hs-var">extend</span></a><span> </span><a href="#local-6989586621679031891"><span class="hs-identifier hs-var">g</span></a><span>
</span><a name="line-341"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">=&lt;=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-342"></a><span>
</span><a name="line-343"></a><span class="hs-comment">-- | Left-to-right 'Cokleisli' composition</span><span>
</span><a name="line-344"></a><span class="hs-special">(</span><span class="hs-operator">=&gt;=</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><a href="#local-6989586621679031841"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031841"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031842"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031843"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031841"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031843"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031844"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031841"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031842"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031844"><span class="hs-identifier hs-type">c</span></a><span>
</span><a name="line-345"></a><a name="local-6989586621679031892"><a href="#local-6989586621679031892"><span class="hs-identifier">f</span></a></a><span> </span><a name="%3D%3E%3D"><a href="Control.Comonad.html#%3D%3E%3D"><span class="hs-operator">=&gt;=</span></a></a><span> </span><a name="local-6989586621679031893"><a href="#local-6989586621679031893"><span class="hs-identifier">g</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679031893"><span class="hs-identifier hs-var">g</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Comonad.html#extend"><span class="hs-identifier hs-var">extend</span></a><span> </span><a href="#local-6989586621679031892"><span class="hs-identifier hs-var">f</span></a><span>
</span><a name="line-346"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">=&gt;=</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-347"></a><span>
</span><a name="line-348"></a><span class="hs-comment">-- | A variant of '&lt;@&gt;' with the arguments reversed.</span><span>
</span><a name="line-349"></a><span class="hs-special">(</span><span class="hs-operator">&lt;@@&gt;</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Control.Comonad.html#ComonadApply"><span class="hs-identifier hs-type">ComonadApply</span></a><span> </span><a href="#local-6989586621679031838"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><a href="#local-6989586621679031838"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031839"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031838"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031839"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031840"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031838"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031840"><span class="hs-identifier hs-type">b</span></a><span>
</span><a name="line-350"></a><span class="hs-special">(</span><a name="%3C%40%40%3E"><a href="Control.Comonad.html#%3C%40%40%3E"><span class="hs-operator">&lt;@@&gt;</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#liftW2"><span class="hs-identifier hs-var">liftW2</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">flip</span><span> </span><span class="hs-identifier hs-var">id</span><span class="hs-special">)</span><span>
</span><a name="line-351"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">(</span><span class="hs-pragma">&lt;@@&gt;</span><span class="hs-pragma">)</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-352"></a><span>
</span><a name="line-353"></a><span class="hs-comment">-- | Lift a binary function into a 'Comonad' with zipping</span><span>
</span><a name="line-354"></a><span class="hs-identifier">liftW2</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Control.Comonad.html#ComonadApply"><span class="hs-identifier hs-type">ComonadApply</span></a><span> </span><a href="#local-6989586621679031834"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031835"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031836"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031837"><span class="hs-identifier hs-type">c</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031834"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031835"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031834"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031836"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031834"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031837"><span class="hs-identifier hs-type">c</span></a><span>
</span><a name="line-355"></a><a name="liftW2"><a href="Control.Comonad.html#liftW2"><span class="hs-identifier">liftW2</span></a></a><span> </span><a name="local-6989586621679031894"><a href="#local-6989586621679031894"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679031895"><a href="#local-6989586621679031895"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679031896"><a href="#local-6989586621679031896"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679031894"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="#local-6989586621679031895"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a><span> </span><a href="#local-6989586621679031896"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-356"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">liftW2</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-357"></a><span>
</span><a name="line-358"></a><span class="hs-comment">-- | Lift a ternary function into a 'Comonad' with zipping</span><span>
</span><a name="line-359"></a><span class="hs-identifier">liftW3</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Control.Comonad.html#ComonadApply"><span class="hs-identifier hs-type">ComonadApply</span></a><span> </span><a href="#local-6989586621679031829"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031830"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031831"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031832"><span class="hs-identifier hs-type">c</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031833"><span class="hs-identifier hs-type">d</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031829"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031830"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031829"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031831"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031829"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031832"><span class="hs-identifier hs-type">c</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031829"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031833"><span class="hs-identifier hs-type">d</span></a><span>
</span><a name="line-360"></a><a name="liftW3"><a href="Control.Comonad.html#liftW3"><span class="hs-identifier">liftW3</span></a></a><span> </span><a name="local-6989586621679031897"><a href="#local-6989586621679031897"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679031898"><a href="#local-6989586621679031898"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679031899"><a href="#local-6989586621679031899"><span class="hs-identifier">b</span></a></a><span> </span><a name="local-6989586621679031900"><a href="#local-6989586621679031900"><span class="hs-identifier">c</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679031897"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="#local-6989586621679031898"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a><span> </span><a href="#local-6989586621679031899"><span class="hs-identifier hs-var">b</span></a><span> </span><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a><span> </span><a href="#local-6989586621679031900"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-361"></a><span class="hs-pragma">{-# INLINE</span><span> </span><span class="hs-pragma">liftW3</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-362"></a><span>
</span><a name="line-363"></a><span class="hs-comment">-- | The 'Cokleisli' 'Arrow's of a given 'Comonad'</span><span>
</span><a name="line-364"></a><span class="hs-keyword">newtype</span><span> </span><a name="Cokleisli"><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier">Cokleisli</span></a></a><span> </span><a name="local-6989586621679031308"><a href="#local-6989586621679031308"><span class="hs-identifier">w</span></a></a><span> </span><a name="local-6989586621679031309"><a href="#local-6989586621679031309"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679031310"><a href="#local-6989586621679031310"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Cokleisli"><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier">Cokleisli</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="runCokleisli"><a href="Control.Comonad.html#runCokleisli"><span class="hs-identifier">runCokleisli</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679031308"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031309"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031310"><span class="hs-identifier hs-type">b</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-365"></a><span class="hs-cpp">#if __GLASGOW_HASKELL__ &gt;= 707
</span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier hs-type">Typeable</span><span>
</span><a name="line-367"></a><span class="hs-cpp">#else
#ifdef __GLASGOW_HASKELL__
</span><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier">Typeable1</span><span> </span><span class="hs-identifier">w</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">Typeable2</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">Cokleisli</span><span> </span><span class="hs-identifier">w</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-370"></a><span>  </span><span class="hs-identifier">typeOf2</span><span> </span><span class="hs-identifier">twab</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">mkTyConApp</span><span> </span><span class="hs-identifier">cokleisliTyCon</span><span> </span><span class="hs-special">[</span><span class="hs-identifier">typeOf1</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">wa</span><span> </span><span class="hs-identifier">twab</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-371"></a><span>        </span><span class="hs-keyword">where</span><span> </span><span class="hs-identifier">wa</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Cokleisli</span><span> </span><span class="hs-identifier">w</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-identifier">b</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">w</span><span> </span><span class="hs-identifier">a</span><span>
</span><a name="line-372"></a><span>              </span><span class="hs-identifier">wa</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">undefined</span><span>
</span><a name="line-373"></a><span class="hs-cpp">#endif
</span><span>
</span><a name="line-375"></a><span class="hs-identifier">cokleisliTyCon</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">TyCon</span><span>
</span><a name="line-376"></a><span class="hs-cpp">#if MIN_VERSION_base(4,4,0)
</span><span class="hs-identifier">cokleisliTyCon</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">mkTyCon3</span><span> </span><span class="hs-string">&quot;comonad&quot;</span><span> </span><span class="hs-string">&quot;Control.Comonad&quot;</span><span> </span><span class="hs-string">&quot;Cokleisli&quot;</span><span>
</span><a name="line-378"></a><span class="hs-cpp">#else
</span><span class="hs-identifier">cokleisliTyCon</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">mkTyCon</span><span> </span><span class="hs-string">&quot;Control.Comonad.Cokleisli&quot;</span><span>
</span><a name="line-380"></a><span class="hs-cpp">#endif
</span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="hs-pragma">cokleisliTyCon</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><a name="line-382"></a><span class="hs-cpp">#endif
</span><span>
</span><a name="line-384"></a><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><a href="#local-6989586621679031782"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Category</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-type">Cokleisli</span></a><span> </span><a href="#local-6989586621679031782"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-385"></a><span>  </span><a name="local-8214565720323789200"><span class="hs-identifier">id</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><a href="Control.Comonad.html#extract"><span class="hs-identifier hs-var">extract</span></a><span>
</span><a name="line-386"></a><span>  </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><a name="local-6989586621679031783"><a href="#local-6989586621679031783"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-8214565720323789199"><span class="hs-operator">.</span></a><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><a name="local-6989586621679031784"><a href="#local-6989586621679031784"><span class="hs-identifier">g</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031783"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="Control.Comonad.html#%3D%3C%3D"><span class="hs-operator hs-var">=&lt;=</span></a><span> </span><a href="#local-6989586621679031784"><span class="hs-identifier hs-var">g</span></a><span class="hs-special">)</span><span>
</span><a name="line-387"></a><span>
</span><a name="line-388"></a><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><a href="#local-6989586621679031774"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Arrow</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-type">Cokleisli</span></a><span> </span><a href="#local-6989586621679031774"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-389"></a><span>  </span><a name="local-3458764513820541108"><span class="hs-identifier">arr</span></a><span> </span><a name="local-6989586621679031775"><a href="#local-6989586621679031775"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031775"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Comonad.html#extract"><span class="hs-identifier hs-var">extract</span></a><span class="hs-special">)</span><span>
</span><a name="line-390"></a><span>  </span><a name="local-3458764513820541110"><span class="hs-identifier">first</span></a><span> </span><a name="local-6989586621679031776"><a href="#local-6989586621679031776"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679031776"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">***</span><span> </span><span class="hs-identifier hs-var">id</span><span>
</span><a name="line-391"></a><span>  </span><a name="local-8214565720323787359"><span class="hs-identifier">second</span></a><span> </span><a name="local-6989586621679031777"><a href="#local-6989586621679031777"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">id</span><span> </span><span class="hs-operator hs-var">***</span><span> </span><a href="#local-6989586621679031777"><span class="hs-identifier hs-var">f</span></a><span>
</span><a name="line-392"></a><span>  </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><a name="local-6989586621679031778"><a href="#local-6989586621679031778"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-8214565720323787358"><span class="hs-operator">***</span></a><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><a name="local-6989586621679031779"><a href="#local-6989586621679031779"><span class="hs-identifier">g</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031778"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-identifier hs-var">fst</span><span> </span><span class="hs-operator hs-var">&amp;&amp;&amp;</span><span> </span><a href="#local-6989586621679031779"><span class="hs-identifier hs-var">g</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-identifier hs-var">snd</span><span class="hs-special">)</span><span>
</span><a name="line-393"></a><span>  </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><a name="local-6989586621679031780"><a href="#local-6989586621679031780"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-8214565720323787357"><span class="hs-operator">&amp;&amp;&amp;</span></a><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><a name="local-6989586621679031781"><a href="#local-6989586621679031781"><span class="hs-identifier">g</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031780"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">&amp;&amp;&amp;</span><span> </span><a href="#local-6989586621679031781"><span class="hs-identifier hs-var">g</span></a><span class="hs-special">)</span><span>
</span><a name="line-394"></a><span>
</span><a name="line-395"></a><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><a href="#local-6989586621679031772"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">ArrowApply</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-type">Cokleisli</span></a><span> </span><a href="#local-6989586621679031772"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-396"></a><span>  </span><a name="local-3458764513820541111"><span class="hs-identifier">app</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679031773"><a href="#local-6989586621679031773"><span class="hs-identifier">w</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">runCokleisli</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fst</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#extract"><span class="hs-identifier hs-var">extract</span></a><span> </span><a href="#local-6989586621679031773"><span class="hs-identifier hs-var">w</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">snd</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="#local-6989586621679031773"><span class="hs-identifier hs-var">w</span></a><span class="hs-special">)</span><span>
</span><a name="line-397"></a><span>
</span><a name="line-398"></a><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#Comonad"><span class="hs-identifier hs-type">Comonad</span></a><span> </span><a href="#local-6989586621679031771"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">ArrowChoice</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-type">Cokleisli</span></a><span> </span><a href="#local-6989586621679031771"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-399"></a><span>  </span><a name="local-8214565720323787370"><span class="hs-identifier">left</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">leftApp</span><span>
</span><a name="line-400"></a><span>
</span><a name="line-401"></a><span class="hs-keyword">instance</span><span> </span><a href="Control.Comonad.html#ComonadApply"><span class="hs-identifier hs-type">ComonadApply</span></a><span> </span><a href="#local-6989586621679031751"><span class="hs-identifier hs-type">w</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">ArrowLoop</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-type">Cokleisli</span></a><span> </span><a href="#local-6989586621679031751"><span class="hs-identifier hs-type">w</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-402"></a><span>  </span><a name="local-3458764513820541113"><span class="hs-identifier">loop</span></a><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><a name="local-6989586621679031752"><a href="#local-6989586621679031752"><span class="hs-identifier">f</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fst</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Comonad.html#wfix"><span class="hs-identifier hs-var">wfix</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Control.Comonad.html#extend"><span class="hs-identifier hs-var">extend</span></a><span> </span><a href="#local-6989586621679031753"><span class="hs-identifier hs-var">f'</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-403"></a><span>    </span><a name="local-6989586621679031753"><a href="#local-6989586621679031753"><span class="hs-identifier">f'</span></a></a><span> </span><a name="local-6989586621679031754"><a href="#local-6989586621679031754"><span class="hs-identifier">wa</span></a></a><span> </span><a name="local-6989586621679031755"><a href="#local-6989586621679031755"><span class="hs-identifier">wb</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679031752"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="#local-6989586621679031754"><span class="hs-identifier hs-var">wa</span></a><span> </span><a href="Control.Comonad.html#%3C%40%3E"><span class="hs-operator hs-var">&lt;@&gt;</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">snd</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="#local-6989586621679031755"><span class="hs-identifier hs-var">wb</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-404"></a><span>
</span><a name="line-405"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-type">Cokleisli</span></a><span> </span><a href="#local-6989586621679031747"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031748"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-406"></a><span>  </span><a name="local-3458764513820541101"><span class="hs-identifier">fmap</span></a><span> </span><a name="local-6989586621679031749"><a href="#local-6989586621679031749"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><a name="local-6989586621679031750"><a href="#local-6989586621679031750"><span class="hs-identifier">g</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031749"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="#local-6989586621679031750"><span class="hs-identifier hs-var">g</span></a><span class="hs-special">)</span><span>
</span><a name="line-407"></a><span>
</span><a name="line-408"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Applicative</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-type">Cokleisli</span></a><span> </span><a href="#local-6989586621679031742"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031743"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-409"></a><span>  </span><a name="local-3458764513820541680"><span class="hs-identifier">pure</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">const</span><span>
</span><a name="line-410"></a><span>  </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><a name="local-6989586621679031744"><a href="#local-6989586621679031744"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-3458764513820541679"><span class="hs-operator">&lt;*&gt;</span></a><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><a name="local-6989586621679031745"><a href="#local-6989586621679031745"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679031746"><a href="#local-6989586621679031746"><span class="hs-identifier">w</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679031744"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679031746"><span class="hs-identifier hs-var">w</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031745"><span class="hs-identifier hs-var">a</span></a><span> </span><a href="#local-6989586621679031746"><span class="hs-identifier hs-var">w</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-411"></a><span>
</span><a name="line-412"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Monad</span><span> </span><span class="hs-special">(</span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-type">Cokleisli</span></a><span> </span><a href="#local-6989586621679031737"><span class="hs-identifier hs-type">w</span></a><span> </span><a href="#local-6989586621679031738"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-413"></a><span>  </span><a name="local-3458764513820541102"><span class="hs-identifier">return</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">pure</span><span>
</span><a name="line-414"></a><span>  </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><a name="local-6989586621679031739"><a href="#local-6989586621679031739"><span class="hs-identifier">k</span></a></a><span> </span><a name="local-3458764513820541099"><span class="hs-operator">&gt;&gt;=</span></a><span> </span><a name="local-6989586621679031740"><a href="#local-6989586621679031740"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Control.Comonad.html#Cokleisli"><span class="hs-identifier hs-var">Cokleisli</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679031741"><a href="#local-6989586621679031741"><span class="hs-identifier">w</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">runCokleisli</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031740"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679031739"><span class="hs-identifier hs-var">k</span></a><span> </span><a href="#local-6989586621679031741"><span class="hs-identifier hs-var">w</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679031741"><span class="hs-identifier hs-var">w</span></a><span>
</span><a name="line-415"></a><span>
</span><a name="line-416"></a><span class="hs-cpp">#if !(MIN_VERSION_base(4,7,0))
</span><span>
</span><a name="line-418"></a><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">4</span><span> </span><span class="hs-operator">$&gt;</span><span>
</span><a name="line-419"></a><span>
</span><a name="line-420"></a><span class="hs-comment">-- | Replace the contents of a functor uniformly with a constant value.</span><span>
</span><a name="line-421"></a><span class="hs-special">(</span><span class="hs-operator">$&gt;</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Functor</span><span> </span><span class="hs-identifier">f</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier">f</span><span> </span><span class="hs-identifier">a</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">b</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">f</span><span> </span><span class="hs-identifier">b</span><span>
</span><a name="line-422"></a><span class="hs-special">(</span><span class="hs-operator">$&gt;</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">flip</span><span> </span><span class="hs-special">(</span><span class="hs-operator">&lt;$</span><span class="hs-special">)</span><span>
</span><a name="line-423"></a><span>
</span><a name="line-424"></a><span class="hs-cpp">#endif
</span></pre></body></html>